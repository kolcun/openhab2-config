import org.eclipse.xtext.xbase.lib.*
import org.openhab.model.script.actions.*
import org.eclipse.smarthome.model.script.actions.Timer

var Timer bathroomTimer = null

rule "set timer for powder room"
when
    Item Powder_Room changed to ON or
    Item Powder_Room_Sconce changed to ON
then
    bathroomTimer = createTimer(now.plusMinutes(1)) [| 
                logInfo("PowderRoomTimer", "Powder Room timer expired")
                bathroomTimer.cancel()
                bathroomTimer = null
                Powder_Room.sendCommand(OFF)
                Powder_Room_Sconce.sendCommand(OFF)
        ]
end
